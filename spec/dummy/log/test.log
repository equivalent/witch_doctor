Connecting to database specified by database.yml
  [1m[36m (1.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (1.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (15.0ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (15.3ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateDocument (20150209121125)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "documents" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "attachment" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150209121125')[0m
  [1m[35m (26.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (22.3ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (15.2ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateDocument (20150209121125)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "documents" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "attachment" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150209121125')[0m
  [1m[35m (15.8ms)[0m  commit transaction
Migrating to CreateWitchDoctorVirusScans (20150209121818)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "virus_scans" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_type" varchar(255), "resource_id" integer, "scan_result" varchar(255), "scanned_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150209121818')[0m
  [1m[35m (15.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (14.6ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (24.2ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateDocument (20150209121125)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  CREATE TABLE "documents" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "attachment" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150209121125')[0m
  [1m[35m (24.5ms)[0m  commit transaction
Migrating to CreateWitchDoctorVirusScans (20150209121818)
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.1ms)[0m  CREATE TABLE "virus_scans" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_type" varchar(255), "resource_id" integer, "scan_result" varchar(255), "mount_point" varchar(255), "scanned_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150209121818')[0m
  [1m[35m (13.6ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (14.9ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (14.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateDocument (20150209121125)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  CREATE TABLE "documents" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "attachment" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150209121125')[0m
  [1m[35m (24.3ms)[0m  commit transaction
Migrating to CreateWitchDoctorVirusScans (20150209121818)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.8ms)[0m  CREATE TABLE "virus_scans" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_type" varchar(255), "resource_id" integer, "scan_result" varchar(255), "mount_point" varchar(255), "scanned_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20150209121818')[0m
  [1m[35m (13.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:48:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 12:51:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
Completed 500 Internal Server Error in 0.8ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 500 Internal Server Error in 0.5ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 500 Internal Server Error in 0.6ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 500 Internal Server Error in 0.5ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 500 Internal Server Error in 0.5ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 500 Internal Server Error in 0.8ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 500 Internal Server Error in 0.6ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"1"}
Completed 500 Internal Server Error in 0.5ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"1"}
Completed 500 Internal Server Error in 0.5ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"1"}
Completed 401 Unauthorized in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:01:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"1"}
Completed 500 Internal Server Error in 0.5ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
Completed 500 Internal Server Error in 1.0ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"1"}
Completed 500 Internal Server Error in 0.3ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"1"}
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:15 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:16 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:16 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"1"}
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:14:16 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:14:16 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:14:16 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:14:16 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"1"}
Completed 500 Internal Server Error in 0.3ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"1"}
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"1"}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"1"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:16:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"1"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.3ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0
Completed 200 OK in 14.8ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0[0m
Completed 200 OK in 1.2ms (Views: 0.4ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.5ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"1"}
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:17:24.549298', "updated_at" = '2015-02-09 13:17:24.550462' WHERE "virus_scans"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 500 Internal Server Error in 9.1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"1"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.5ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 406 Not Acceptable in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 7.7ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00], ["mount_point", "file"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:17:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"1"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0
Completed 200 OK in 6.4ms (Views: 1.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0[0m
Completed 200 OK in 1.3ms (Views: 0.4ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.5ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.5ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:20:02.148962', "updated_at" = '2015-02-09 13:20:02.149159' WHERE "virus_scans"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 500 Internal Server Error in 8.9ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"1"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.5ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 5.0ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"1"}
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00], ["mount_point", "attachement"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"1"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"1"}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:20:24.685318', "updated_at" = '2015-02-09 13:20:24.685616' WHERE "virus_scans"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 500 Internal Server Error in 7.4ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"1"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 5.0ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 1.3ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"1"}
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0[0m
Completed 200 OK in 5.8ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0
Completed 200 OK in 2.0ms (Views: 0.4ms | ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.9ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:24:17.201252', "updated_at" = '2015-02-09 13:24:17.201437' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 5.8ms (Views: 1.3ms | ActiveRecord: 0.4ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 5.0ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.2ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0
Completed 200 OK in 5.0ms (Views: 0.5ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.5ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:24:17 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0
Completed 200 OK in 1.5ms (Views: 0.5ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:25:17.436982', "updated_at" = '2015-02-09 13:25:17.437146' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 5.5ms (Views: 1.2ms | ActiveRecord: 0.4ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 5.1ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.3ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0
Completed 200 OK in 5.0ms (Views: 0.5ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0[0m
Completed 200 OK in 1.1ms (Views: 0.4ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 1.3ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:25:27.407904', "updated_at" = '2015-02-09 13:25:27.408071' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 5.9ms (Views: 1.2ms | ActiveRecord: 0.5ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.6ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 5.9ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0
Completed 200 OK in 5.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.5ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.5ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:25:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0[0m
Completed 200 OK in 1.2ms (Views: 0.4ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (27.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (22.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (23.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (12.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (23.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:31 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:31 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:31 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:31 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:31 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:31 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.9ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.3ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (21.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.2ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:31:32.119479', "updated_at" = '2015-02-09 13:31:32.119757' WHERE "virus_scans"."id" = 2
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 10.4ms (Views: 2.1ms | ActiveRecord: 0.7ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (12.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 5.2ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (12.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.5ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (12.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (21.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (12.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0
Completed 200 OK in 5.5ms (Views: 0.5ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (15.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.7ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (24.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (24.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:31:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0[0m
Completed 200 OK in 1.3ms (Views: 0.4ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (12.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (15.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (12.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (12.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (20.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (17.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (20.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (14.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (22.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (23.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (17.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (22.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (12.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (12.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (19.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (20.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (24.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (23.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (12.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (23.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (15.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (25.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (17.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (22.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (24.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (12.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (22.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (21.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (11.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (23.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (22.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (12.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (22.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:32:23.815084', "updated_at" = '2015-02-09 13:32:23.815260' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 6.1ms (Views: 1.2ms | ActiveRecord: 0.4ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (26.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 5.0ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 1.2ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.2ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (11.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0
Completed 200 OK in 6.0ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.4ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (21.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0[0m
Completed 200 OK in 1.2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (24.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:32:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (21.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (16.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (21.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (12.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (19.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (22.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (17.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (24.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (20.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (29.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (21.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (37.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (23.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (23.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (24.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (12.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (26.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0[0m
Completed 200 OK in 6.4ms (Views: 1.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 0[0m
Completed 200 OK in 1.2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.5ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.2ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:33:46.309823', "updated_at" = '2015-02-09 13:33:46.310016' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 5.8ms (Views: 1.2ms | ActiveRecord: 0.5ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (24.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (23.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.5ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 5.0ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (28.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 1.4ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:33:46 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (19.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (12.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (23.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (14.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (22.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (22.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (21.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (26.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (12.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (12.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 9.1ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 3.6ms (Views: 2.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (24.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (27.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:37 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.2ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:34:37.967649', "updated_at" = '2015-02-09 13:34:37.967948' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 7.1ms (Views: 1.7ms | ActiveRecord: 0.6ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (29.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.7ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (18.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 1.5ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (18.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 5.4ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (24.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (18.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (23.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (20.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (12.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (15.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:34:42.637250', "updated_at" = '2015-02-09 13:34:42.637419' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 5.5ms (Views: 1.2ms | ActiveRecord: 0.4ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 4.9ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (20.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.4ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (23.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (11.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.5ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 7.2ms (Views: 2.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (28.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:43 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 3.5ms (Views: 2.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (31.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 10.3ms (Views: 4.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 2.2ms (Views: 1.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (20.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (17.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:34:56.125369', "updated_at" = '2015-02-09 13:34:56.125559' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 4.5ms (Views: 1.1ms | ActiveRecord: 0.4ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (19.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 5.7ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (29.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.6ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:34:56 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (18.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:35:06.953683', "updated_at" = '2015-02-09 13:35:06.953854' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 6.5ms (Views: 1.2ms | ActiveRecord: 0.4ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 5.7ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (23.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.3ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (18.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (17.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 7.1ms (Views: 2.4ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.6ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (21.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 3.1ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:49 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:49 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:49 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (17.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (11.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL ORDER BY id LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 10.6ms (Views: 5.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (17.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL ORDER BY id LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 3.1ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (12.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:35:50.366321', "updated_at" = '2015-02-09 13:35:50.366498' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 4.6ms (Views: 1.2ms | ActiveRecord: 0.5ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (18.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 2.0ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 5.0ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:35:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.6ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (19.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (22.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:36:51.614028', "updated_at" = '2015-02-09 13:36:51.614194' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 5.5ms (Views: 1.1ms | ActiveRecord: 0.4ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.5ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 4.6ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (17.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (19.5ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 7.2ms (Views: 2.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (18.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (21.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:36:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 4.7ms (Views: 3.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (17.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (18.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 9.1ms (Views: 3.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 3.2ms (Views: 2.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (18.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (18.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:37 UTC +00:00]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.2ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:37:38.061456', "updated_at" = '2015-02-09 13:37:38.061676' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 5.6ms (Views: 1.0ms | ActiveRecord: 0.4ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (24.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 1.7ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 6.4ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:37:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (20.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (12.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 9.3ms (Views: 4.0ms | ActiveRecord: 0.3ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (17.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 3.3ms (Views: 2.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (12.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:38:28.058957', "updated_at" = '2015-02-09 13:38:28.059152' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 4.8ms (Views: 1.0ms | ActiveRecord: 0.4ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (18.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.6ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 6.9ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:38:28 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (12.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:39:06.256696', "updated_at" = '2015-02-09 13:39:06.256897' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 5.6ms (Views: 1.3ms | ActiveRecord: 0.4ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (18.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 4.9ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (18.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.2ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.8ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (17.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (12.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 7.6ms (Views: 2.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 3.2ms (Views: 2.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:39:37.663032', "updated_at" = '2015-02-09 13:39:37.663202' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 5.5ms (Views: 1.2ms | ActiveRecord: 0.4ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (17.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 2.5ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (15.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 4.8ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (20.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (15.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mVirusScan Load (0.3ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (20.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mVirusScan Load (0.4ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 7.4ms (Views: 2.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mVirusScan Load (0.4ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mVirusScan Load (0.2ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (18.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mVirusScan Load (0.3ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 3.2ms (Views: 2.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.2ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 9.3ms (Views: 3.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mVirusScan Load (0.2ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mVirusScan Load (0.2ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (17.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (22.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:39:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 3.2ms (Views: 2.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 9.0ms (Views: 3.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (17.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (11.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 3.0ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.5ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mVirusScan Load (0.5ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:09 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 10.4ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mVirusScan Load (0.2ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 3.0ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mVirusScan Load (0.3ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:37 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:37 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:37 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 10.8ms (Views: 4.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.6ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:40:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.2ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.3ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 6.0ms (Views: 4.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.2ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.3ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 11.8ms (Views: 6.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 3.2ms (Views: 2.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (17.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (18.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.3ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.6ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.5ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.4ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.4ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 13.9ms (Views: 7.8ms | ActiveRecord: 0.9ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (14.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (24.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:05 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (17.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (20.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 3.2ms (Views: 2.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:21 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.2ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.2ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 12.7ms (Views: 7.1ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (18.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.2ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 10.9ms (Views: 5.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (18.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 2.9ms (Views: 2.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (22.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (20.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (18.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (23.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (18.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:41:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 10.2ms (Views: 4.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (14.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (17.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
Connecting to database specified by database.yml
  [1m[36m (0.7ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:42:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:42:07 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:42:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:42:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:42:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:42:07 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:42:07 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:42:07 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:42:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:42:07 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:42:07 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:42:07 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.2ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 11.0ms (Views: 5.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (23.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:42:33 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:42:33 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:42:33 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:42:33 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:42:33 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:42:33 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" [0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" 
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 10.2ms (Views: 3.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:42:33 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:42:33 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:42:33 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:42:33 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:42:33 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:42:33 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (22.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:19 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 9.0ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.4ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 1.0ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (17.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:43:22.935770', "updated_at" = '2015-02-09 13:43:22.935986' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 6.2ms (Views: 1.6ms | ActiveRecord: 0.5ms)
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mDocument Load (0.2ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.5ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:22 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 6.0ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 1.1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.4ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.5ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.7ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (12.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.2ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 9.2ms (Views: 4.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.5ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 4.3ms (Views: 3.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.5ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:43:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.4ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (18.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (15.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (18.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (21.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (12.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (20.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (15.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (16.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (23.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 12.4ms (Views: 4.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 4.1ms (Views: 2.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.5ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (20.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (22.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (24.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.2ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:48:13.961896', "updated_at" = '2015-02-09 13:48:13.962092' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 7.3ms (Views: 1.1ms | ActiveRecord: 0.5ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (20.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 2.7ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 7.2ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:14 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (17.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (18.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 9.3ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "virus_scans" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 3.1ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (25.5ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (21.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 1.0ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (19.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:48:40.637474', "updated_at" = '2015-02-09 13:48:40.637662' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 4.8ms (Views: 1.0ms | ActiveRecord: 0.4ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"2"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 2.6ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (22.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"2"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 5.0ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"2"}
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (23.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:48:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 2]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"2"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"1"}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:49:48.882313', "updated_at" = '2015-02-09 13:49:48.882505' WHERE "virus_scans"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 8.3ms (Views: 3.7ms | ActiveRecord: 0.5ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"1"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 5.1ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:48 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 2.2ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (21.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"1"}
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.2ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 3 LIMIT 1[0m
Completed 200 OK in 9.4ms (Views: 3.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "virus_scans" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (22.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (21.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 3 LIMIT 1[0m
Completed 200 OK in 3.3ms (Views: 2.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:49:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (19.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 3 LIMIT 1
Completed 200 OK in 11.5ms (Views: 6.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (12.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 3 LIMIT 1[0m
Completed 200 OK in 3.2ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (20.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (17.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"1"}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"1"}
Completed 401 Unauthorized in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (16.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (19.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:00 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:50:01.000933', "updated_at" = '2015-02-09 13:50:01.001118' WHERE "virus_scans"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 4.6ms (Views: 1.0ms | ActiveRecord: 0.4ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (21.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:01 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:50:01 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"1"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 5.0ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:01 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:50:01 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 1.4ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (19.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (20.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:50:01 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:50:01 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:50:01 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:50:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (17.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:52:38.459853', "updated_at" = '2015-02-09 13:52:38.459991' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:57 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:52:58 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:52:58 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:52:58 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:52:58 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:52:58.020942', "updated_at" = '2015-02-09 13:52:58.021079' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:52:58 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:52:58 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:52:58 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:52:58 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (17.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:53:10 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (21.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (18.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:53:11 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:53:11.101866', "updated_at" = '2015-02-09 13:53:11.102025' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:54:50.572320', "updated_at" = '2015-02-09 13:54:50.572518' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (17.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", "blank_pdf.pdf"], ["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (18.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:54:50 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:55:31.373733', "updated_at" = '2015-02-09 13:55:31.373980' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (17.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (22.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", "blank_pdf.pdf"], ["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:31 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (12.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", "blank_pdf.pdf"], ["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (17.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (26.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (23.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:55:54 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:55:54.410160', "updated_at" = '2015-02-09 13:55:54.410337' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (25.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:56:10.305912', "updated_at" = '2015-02-09 13:56:10.306086' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (26.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.5ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.5ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", "blank_pdf.pdf"], ["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:10 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", "blank_pdf.pdf"], ["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:56:40.791989', "updated_at" = '2015-02-09 13:56:40.792183' WHERE "virus_scans"."id" = 2
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (28.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (19.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.3ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (12.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (17.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (18.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (18.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:56:44.903825', "updated_at" = '2015-02-09 13:56:44.903985' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (22.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", "blank_pdf.pdf"], ["created_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:44 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"1"}
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"1"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (18.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  UPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 13:56:45.158686', "updated_at" = '2015-02-09 13:56:45.158846' WHERE "virus_scans"."id" = 1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
Completed 200 OK in 3.6ms (Views: 1.2ms | ActiveRecord: 0.3ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (17.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 2.5ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"1"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 4.9ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (23.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 3 LIMIT 1
Completed 200 OK in 7.4ms (Views: 2.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (28.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (18.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (28.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 13:56:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 3 LIMIT 1[0m
Completed 200 OK in 3.0ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (14.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (17.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (20.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (24.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (15.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (14.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (17.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (18.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (18.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (12.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
Connecting to database specified by database.yml
  [1m[36m (1.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.2ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.2ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 3 LIMIT 1
Completed 200 OK in 17.0ms (Views: 9.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (21.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (21.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 3 LIMIT 1[0m
Completed 200 OK in 3.0ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (15.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (29.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:51 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"1"}
Completed 401 Unauthorized in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 15:10:52.149415', "updated_at" = '2015-02-09 15:10:52.149660' WHERE "virus_scans"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 5.5ms (Views: 1.0ms | ActiveRecord: 0.5ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (29.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (24.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"1"}
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 406 Not Acceptable in 1.6ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (23.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (23.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 400 Bad Request in 32.8ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (22.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"1"}
Completed 403 Forbidden in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (20.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (25.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (12.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (18.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (25.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (26.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (11.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (12.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (24.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (24.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.1ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.5ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (19.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 15:10:53.380772', "updated_at" = '2015-02-09 15:10:53.380900' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", "blank_pdf.pdf"], ["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (26.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:10:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (20.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (27.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (20.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (22.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:39 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 3 LIMIT 1
Completed 200 OK in 10.5ms (Views: 4.1ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (23.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 3 LIMIT 1[0m
Completed 200 OK in 3.1ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.6ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (17.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"1"}
Completed 403 Forbidden in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (17.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"1"}
Completed 401 Unauthorized in 0.5ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 15:12:40.415846', "updated_at" = '2015-02-09 15:12:40.416024' WHERE "virus_scans"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 4.8ms (Views: 1.0ms | ActiveRecord: 0.4ms)
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (20.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"1"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 5.2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 2.8ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:40 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 406 Not Acceptable in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (12.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (12.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (12.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (11.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (23.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (12.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (12.2ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (23.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (12.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (20.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (12.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (20.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (23.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (18.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (17.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (20.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.0ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.5ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (15.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (14.8ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (12.9ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (15.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 15:12:41.316565', "updated_at" = '2015-02-09 15:12:41.316665' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (14.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", "blank_pdf.pdf"], ["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:12:41 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (12.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (16.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (11.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (18.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (12.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (20.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.1ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (26.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (27.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (23.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.1ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (15.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (18.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.6ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (13.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (14.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (27.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (15.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (16.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>999}
Completed 403 Forbidden in 0.6ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (21.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (15.7ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
  Parameters: {"token"=>"1234"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 3 LIMIT 1
Completed 200 OK in 9.9ms (Views: 4.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.3ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.8ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by WitchDoctor::VirusScansController#index as JSON
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL LIMIT 2[0m
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = 3 LIMIT 1[0m
Completed 200 OK in 3.1ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (22.3ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (12.5ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.9ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.8ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 3], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as HTML
  Parameters: {"token"=>"1234"}
Completed 406 Not Acceptable in 0.4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (15.0ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (14.0ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by WitchDoctor::VirusScansController#index as JSON
Completed 401 Unauthorized in 0.4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (12.4ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (21.2ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"999", "id"=>"1"}
Completed 403 Forbidden in 0.5ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (12.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.3ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.2ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 15:26:39.497605', "updated_at" = '2015-02-09 15:26:39.497812' WHERE "virus_scans"."id" = 1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
Completed 200 OK in 5.5ms (Views: 1.4ms | ActiveRecord: 0.5ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mDocument Load (0.1ms)[0m  SELECT "documents".* FROM "documents" WHERE "documents"."id" = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (17.9ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.1ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Wazaaap"}, "id"=>"1"}
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 400 Bad Request in 5.2ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (18.5ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (10.9ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as HTML
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean"}, "id"=>"1"}
Completed 406 Not Acceptable in 0.7ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.7ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.3ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"token"=>"1234", "virus_scan"=>{"scan_result"=>"Clean", "mount_point"=>"abc"}, "id"=>"1"}
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL AND "virus_scans"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 406 Not Acceptable in 1.7ms (Views: 0.2ms | ActiveRecord: 0.1ms)
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (12.4ms)[0m  DELETE FROM "documents";
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (12.6ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.0ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1[0m  [["id", 1]]
Processing by WitchDoctor::VirusScansController#update as JSON
  Parameters: {"id"=>"1"}
Completed 401 Unauthorized in 0.3ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35mVirusScan Load (0.0ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (18.6ms)[0m  DELETE FROM "documents";
  [1m[36m (0.4ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (16.3ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", "Clean"], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)[0m  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 2], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mVirusScan Load (0.1ms)[0m  [1mSELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL[0m
  [1m[35mVirusScan Load (0.1ms)[0m  SELECT "virus_scans".* FROM "virus_scans" WHERE "virus_scans"."scan_result" IS NULL
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.2ms)[0m  DELETE FROM "documents";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", "blank_pdf.pdf"], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (12.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (13.4ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mUPDATE "virus_scans" SET "scan_result" = 'Clean', "scanned_at" = '2015-02-09 15:26:39.820625', "updated_at" = '2015-02-09 15:26:39.820736' WHERE "virus_scans"."id" = 2[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (13.7ms)[0m  DELETE FROM "documents";
  [1m[36m (0.2ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'documents';[0m
  [1m[35m (14.0ms)[0m  DELETE FROM "virus_scans";
  [1m[36m (0.3ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'virus_scans';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "documents" ("attachment", "created_at", "title", "updated_at") VALUES (?, ?, ?, ?)  [["attachment", nil], ["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["title", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "virus_scans" ("created_at", "mount_point", "resource_id", "resource_type", "scan_result", "scanned_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00], ["mount_point", "attachment"], ["resource_id", 1], ["resource_type", "Document"], ["scan_result", nil], ["scanned_at", nil], ["updated_at", Mon, 09 Feb 2015 15:26:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (13.2ms)[0m  [1mDELETE FROM "documents";[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'documents';
  [1m[36m (13.4ms)[0m  [1mDELETE FROM "virus_scans";[0m
  [1m[35m (0.4ms)[0m  DELETE FROM sqlite_sequence where name = 'virus_scans';
